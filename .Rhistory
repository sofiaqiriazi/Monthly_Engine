deps.long[,2:ncol(deps.long)] <- sapply(deps.long[,2:ncol(deps.long)], as.numeric)
rain.long[,2:ncol(rain.long)] <- sapply(rain.long[,2:ncol(rain.long)], as.numeric)
#This section marks the aggregation per month of the Arrivals PRMN file
#output of this file goes to ArrivalsperMonth.csv
odd_indexes<-seq(3,54,2)
header <- arrs.long[0,odd_indexes]
headin <- names(header)
arrmonth <- aggregate(cbind(Awdal_Arrival,Bakool_Arrival,Banadir_Arrival,
Bari_Arrival,Bay_Arrival,Galgaduud_Arrival,
Gedo_Arrival,Hiiraan_Arrival,Jubbada_Dhexe_Arrival,
Jubbada_Hoose_Arrival,Mudug_Arrival,Nugaal_Arrival,
Sanaag_Arrival,Shabeellaha_Dhexe_Arrival,
Shabeellaha_Hoose_Arrival,Sool_Arrival,Togdheer_Arrival,
Woqooyi_Galbeed_Arrival,Somalia,Somalia.general,
South.Africa,DJI,ETH,KEN,SAU,YEM)~(month(Date)+year(Date)),
data=arrs.long,FUN=sum)
monthsintotal <- nrow(arrmonth)
monthdate<- rep(NA,monthsintotal)
for (t in 1:monthsintotal){
m <- as.character(arrmonth[t,1])
y<- substr(as.character(arrmonth[t,2]),3,4)
if(nchar(m)==1){
m <- paste("0",as.character(arrmonth[t,1]),sep="")
}
monthdate[t] <- paste(m,"/",y,sep="")
}
Date <-as.yearmon(monthdate,format = "%m/%y")
arrmonth <-cbind(Date,arrmonth[,3:length(arrmonth)])
write.csv(as.data.frame(arrmonth[1:length(arrmonth)]), file ="ArrivalsperMonth.csv",row.names = FALSE)
#This section marks the aggregation per month of the Departures PRMN file
#output of this file goes to DeparturesperMonth.csv
odd_indexes<-seq(3,54,2)
header <- deps.long[0,odd_indexes]
headin <- names(header)
depmonth <- aggregate(cbind(Awdal,Bakool,Banadir,Bari,Bay,Galgaduud,Gedo,Hiiraan,
Jubbada_Dhexe,Jubbada_Hoose,Mudug,Nugaal,Sanaag,
Shabeallaha_Dhexe,Shabeellaha_Hoose,Sool,Togdheer,
Woqooyi_Galbeed,Azerbaijan,DJI, Djibouti, ETH,
Ethiopia, Ethiopia.general, KEN,Kenya.general)~(month(Date)+year(Date)),
data=deps.long,FUN=sum)
monthsintotal <- nrow(depmonth)
monthdate<- rep(NA,monthsintotal)
for (t in 1:monthsintotal){
m <- as.character(depmonth[t,1])
y<- substr(as.character(depmonth[t,2]),3,4)
if(nchar(m)==1){
m <- paste("0",as.character(depmonth[t,1]),sep="")
}
monthdate[t] <- paste(m,"/",y,sep="")
}
Date <-as.yearmon(monthdate,format = "%m/%y")
depmonth <-cbind(Date,depmonth[,3:length(depmonth)])
write.csv(as.data.frame(depmonth[1:length(depmonth)]), file ="DeparturesperMonth.csv",row.names = FALSE)
#This section marks the aggregation per month of the Conflicts table in Jetson file
#output of this file goes to ConflictsperMonth.csv
odd_indexes<-seq(4,40,2)
header <- acled.long[0,odd_indexes]
headin <- names(header)
confmonth <- aggregate(cbind(Awdal,Bakool,Banadir,Bari,Bay,Galgaduud,Gedo,Hiiraan,
Jubbada_Dhexe,Jubbada_Hoose,Mudug,Nugaal,Sanaag,
Shabeellaha_Dhexe,Shabeellaha_Hoose,Sool,Togdheer,
Woqooyi_Galbeed)~(month(Date)+year(Date)),
data=acled.long,FUN=sum)
monthsintotal <- nrow(confmonth)
monthdate<- rep(NA,monthsintotal)
for (t in 1:monthsintotal){
m <- as.character(confmonth[t,1])
y<- substr(as.character(confmonth[t,2]),3,4)
if(nchar(m)==1){
m <- paste("0",as.character(confmonth[t,1]),sep="")
}
monthdate[t] <- paste(m,"/",y,sep="")
}
Date <-as.yearmon(monthdate,format = "%m/%y")
confmonth <-cbind(Date,confmonth[,3:length(confmonth)])
write.csv(as.data.frame(confmonth[1:length(confmonth)]), file ="ConflictsperMonth.csv",row.names = FALSE)
#This section marks the aggregation per month of the Rainfall file
#output of this file goes to RainfallperMonth.csv
odd_indexes<-seq(2,18,1)
header <- rain.long[0,odd_indexes]
headin <- names(header)
rain.long[is.na(rain.long)] <- 0
rainmonth <- aggregate(cbind(Awdal,Bakool,Banaadir,Bari,Bay,Gedo,Hiiraan,
Jubbada_Dhexe,Jubbada_Hoose,Mudug,Nugaal,Sanaag,
Shabeellaha_Dhexe,Shabeellaha_Hoose,Sool,Togdheer,
Woqooyi_Galbeed)~(month(Date)+year(Date)),
data=rain.long,FUN=sum)
monthsintotal <- nrow(rainmonth)
monthdate<- rep(NA,monthsintotal)
for (t in 1:monthsintotal){
m <- as.character(rainmonth[t,1])
y<- as.character(rainmonth[t,2])
if(nchar(m)==1){
m <- paste("0",as.character(rainmonth[t,1]),sep="")
}
monthdate[t] <- paste(m,"/",y,sep="")
}
Date <-as.yearmon(monthdate,format = "%m/%y")
rainmonth <-cbind(Date,rainmonth[,3:length(rainmonth)])
write.csv(as.data.frame(rainmonth[1:length(rainmonth)]), file ="RainfallperMonth.csv",row.names = FALSE)
##saving all in one excel
write.xlsx(x = as.data.frame(confmonth[1:length(confmonth)]),
file = "Jetson_perMonth.xlsx",
sheetName = "Conflict",
row.names = FALSE,
append = TRUE)
write.xlsx(x = as.data.frame(arrmonth[1:length(arrmonth)]),
file = "Jetson_perMonth.xlsx",
sheetName = "Arrivals",
row.names = FALSE,
append = TRUE)
write.xlsx(x = as.data.frame(depmonth[1:length(depmonth)]),
file = "Jetson_perMonth.xlsx",
sheetName = "Departures",
row.names = FALSE,
append = TRUE)
write.xlsx(x = as.data.frame(rainmonth[1:length(rainmonth)]),
file = "Jetson_perMonth.xlsx",
sheetName = "Rainfall",
row.names = FALSE,
append = TRUE)
library(gsheet)
library(lubridate)
library(zoo)
library(rJava)
library(xlsx)
incidents <- "https://drive.google.com/open?id=1VX3XeVXzDWWhcb36jik3k9Whq_gnELw_07L21L_QmnE"
arrivals <- "https://drive.google.com/open?id=1HoMZooolfAAlEzyFhWhxxmzcpDqQu_WdBCT7v0o4X-Y"
departures <- "https://drive.google.com/open?id=1jbwk2rzuq86RVQs0_Jcr_34DLFgdun1ctKc6y5kj_9I"
rainfall <-"https://drive.google.com/open?id=1DZ8ZIdJnXWWxcpaqjETgvOyOP_dLxXt-V8bBqwTkWOg"
acled <- gsheet2text(incidents)
acled.long <- read.csv(text=acled)
rain <-gsheet2text(rainfall)
rain.long <- read.csv(text=rain,stringsAsFactors = FALSE)
rain.long$Date <-as.Date(rain.long$Date, format="%d.%m.%Y")
rain.long[,2:ncol(rain.long)] <- sapply(rain.long[,2:ncol(rain.long)], as.numeric)
setwd("~/UNHCR/App/MonthlyPredictions")
shiny::runApp()
runApp()
start = 92
end = 92
len = 92
PI <- PA <- PD <- rep(NA, len)
for (t in start:end){
S_RD <- rivers.long[t,"Shabelle_River_discharge"]
#wma(Togdheer_Arrival, 8) +
T_A <- weighted.mean(arrs.long[ (t-8):t, "Togdheer_Arrival"])
#max(
#2.85396032063776*Bakool_Arrival +
Bak_A <- 2.81910559622002*arrs.long[t,"Bakool_Arrival"]
#2.00585641198899*Bari_Arrival +
Bari_A <- 2.48532945247097*arrs.long[t,"Bari_Arrival"]
#0.584222032988209*Bay_Departures +
Bay_D <- 0.595514845826536*deps.long[t,"Bay_Departures"]
#Shabeellaha_Dhexe_rain*sma(Jubbada_Hoose_Departures, 2) +
SH_R_JH_D <- -1*rain.long[t,"Shabeellaha_Dhexe_rain"]*mean(deps.long[(t-2):t,"Jubbada_Hoose_Departures"])
#-0.0794226038273046*Hiiraan_WaterDrumPrice
H_WDP <- -0.0833170517942912*as.numeric(water.long[t, "Hiiraan_WaterDrumPrice"])
#-6.45129861220252*Awdal_Departures,
A_D <- -5.84944477753492*deps.long[t,"Awdal_Departures"]
#0.2731815154054876*Bay_Departures)
Bay_D2 <- 0.312135550188447*deps.long[t,"Bay_Departures"]
#Bay_Arrival = Shabeellaha_Dhexe_rain + delay(Woqooyi_Galbeed_Arrival, 1) + wma(Togdheer_Arrival, 6)
#+ max(2.84291053988138*Bakool_Arrival + 1.90605269499887*Bari_Arrival + 0.582938861571093*Bay_Departures
#+ delay(Woqooyi_Galbeed_Arrival, 1) - (Shabeellaha_Dhexe_rain*sma(Jubbada_Hoose_Departures, 2) )
#- 0.0801078676959042*Hiiraan_WaterDrumPrice - 6.62472178142272*Awdal_Departures, 0.263886473589876*Bay_Departures)
#breaking the function to section max
PA[t] <- 0
section_max <- max(sum(Bak_A,Bari_A,Bay_D,SH_R_JH_D,H_WDP,A_D,na.rm=TRUE),Bay_D2)
section_add <- sum(S_DR, T_A, section_max, na.rm=TRUE)
PA[t] <- section_add
#Bay_Incidents
PI[t] <- 0
#Bay_Departures
PD[t] <- 0
}
library(shiny)
library(datasets)
library(magrittr)
library(XML)
library(reshape)
library(gsheet)
library(ggplot2)
library(scales)
library(zoo)
jetson <- "https://docs.google.com/spreadsheets/d/1oPTPmoJ9phtMOkp-nMB7WHnPESomLzqUj9t0gcE9bYA"
conflicts <- gsheet2text(jetson, sheetid = 819472314)
conflicts.long <- read.csv(text=conflicts)
arrs <-gsheet2text(jetson, sheetid = 457614883)
arrs.long <- read.csv(text=arrs)
deps <-gsheet2text(jetson, sheetid = 677621454)
deps.long <-read.csv(text=deps)
rain <-gsheet2text(jetson, sheetid = 1473662223)
rain.long <- read.csv(text=rain,stringsAsFactors = FALSE)
water <-gsheet2text(jetson, sheetid =27261871)
water.long <- read.csv(text=water,stringsAsFactors = FALSE)
rivers <-gsheet2text(jetson, sheetid =407366559)
rivers.long <- read.csv(text=rivers,stringsAsFactors = FALSE)
goats <-gsheet2text(jetson, sheetid =1601716765)
goats.long <- read.csv(text=goats,stringsAsFactors = FALSE)
fatalities <-gsheet2text(jetson, sheetid =343810263)
fatalities.long <- read.csv(text=fatalities,stringsAsFactors = FALSE)
discharge <- gsheet2text(jetson, sheetid=407366559)
discharge <- read.csv(text=discharge,stringsAsFactors = FALSE)
Dates <- sapply(conflicts.long[,1],as.character.Date)
conflicts.long$Date <- as.Date(conflicts.long$Date, format="%m/%d/%Y")
arrs.long$Date <- as.Date(arrs.long$Date, format="%m/%d/%Y")
deps.long$Date <- as.Date(deps.long$Date, format="%m/%d/%Y")
rain.long$Date <-as.Date(rain.long$Date, format="%m/%d/%Y")
water.long$Date <-as.Date(water.long$Date, format="%m/%d/%Y")
rivers.long$Date <-as.Date(rivers.long$Date, format="%m/%d/%Y")
goats.long$Date <-as.Date(goats.long$Date, format="%m/%d/%Y")
fatalities.long$Date <-as.Date(fatalities.long$Date, format="%m/%d/%Y")
conflicts.long[,2:ncol(conflicts.long)] <- sapply(conflicts.long[,2:ncol(conflicts.long)], as.numeric)
arrs.long[,2:ncol(arrs.long)] <- sapply(arrs.long[,2:ncol(arrs.long)], as.numeric)
deps.long[,2:ncol(deps.long)] <- sapply(deps.long[,2:ncol(deps.long)], as.numeric)
rain.long[,2:ncol(rain.long)] <- sapply(rain.long[,2:ncol(rain.long)], as.numeric)
water.long[,2:ncol(water.long)] <- sapply(water.long[,2:ncol(water.long)], as.numeric)
rivers.long[,2:ncol(rivers.long)] <- sapply(rivers.long[,2:ncol(rivers.long)], as.numeric)
goats.long[,2:ncol(goats.long)] <- sapply(goats.long[,2:ncol(goats.long)], as.numeric)
water.long[,2:ncol(water.long)] <- sapply(water.long[,2:ncol(water.long)], as.numeric,na.rm=TRUE)
rivers.long[,2:ncol(rivers.long)] <- sapply(rivers.long[,2:ncol(rivers.long)], as.numeric)
goats.long[,2:ncol(goats.long)] <- sapply(goats.long[,2:ncol(goats.long)], as.numeric)
deps.long[,2:ncol(deps.long)] <- sapply(deps.long[,2:ncol(deps.long)], as.numeric)
rain.long[,2:ncol(rain.long)] <- sapply(rain.long[,2:ncol(rain.long)], as.numeric)
water.long[,2:ncol(water.long)] <- sapply(water.long[,2:ncol(water.long)], as.numeric,na.rm=TRUE)
rivers.long[,2:ncol(rivers.long)] <- sapply(rivers.long[,2:ncol(rivers.long)], as.numeric)
goats.long[,2:ncol(goats.long)] <- sapply(goats.long[,2:ncol(goats.long)], as.numeric)
fatalities.long[,2:ncol(fatalities.long)] <- sapply(fatalities.long[,2:ncol(fatalities.long)], as.numeric)
monthStart <- function(x) {
x <- as.POSIXlt(x)
x$mday <- 1
as.Date(x)
}
start = 92
end = 92
len = 92
PI <- PA <- PD <- rep(NA, len)
for (t in start:end){
S_RD <- rivers.long[t,"Shabelle_River_discharge"]
#wma(Togdheer_Arrival, 8) +
T_A <- weighted.mean(arrs.long[ (t-8):t, "Togdheer_Arrival"])
#max(
#2.85396032063776*Bakool_Arrival +
Bak_A <- 2.81910559622002*arrs.long[t,"Bakool_Arrival"]
#2.00585641198899*Bari_Arrival +
Bari_A <- 2.48532945247097*arrs.long[t,"Bari_Arrival"]
#0.584222032988209*Bay_Departures +
Bay_D <- 0.595514845826536*deps.long[t,"Bay_Departures"]
#Shabeellaha_Dhexe_rain*sma(Jubbada_Hoose_Departures, 2) +
SH_R_JH_D <- -1*rain.long[t,"Shabeellaha_Dhexe_rain"]*mean(deps.long[(t-2):t,"Jubbada_Hoose_Departures"])
#-0.0794226038273046*Hiiraan_WaterDrumPrice
H_WDP <- -0.0833170517942912*as.numeric(water.long[t, "Hiiraan_WaterDrumPrice"])
#-6.45129861220252*Awdal_Departures,
A_D <- -5.84944477753492*deps.long[t,"Awdal_Departures"]
#0.2731815154054876*Bay_Departures)
Bay_D2 <- 0.312135550188447*deps.long[t,"Bay_Departures"]
#Bay_Arrival = Shabeellaha_Dhexe_rain + delay(Woqooyi_Galbeed_Arrival, 1) + wma(Togdheer_Arrival, 6)
#+ max(2.84291053988138*Bakool_Arrival + 1.90605269499887*Bari_Arrival + 0.582938861571093*Bay_Departures
#+ delay(Woqooyi_Galbeed_Arrival, 1) - (Shabeellaha_Dhexe_rain*sma(Jubbada_Hoose_Departures, 2) )
#- 0.0801078676959042*Hiiraan_WaterDrumPrice - 6.62472178142272*Awdal_Departures, 0.263886473589876*Bay_Departures)
#breaking the function to section max
PA[t] <- 0
section_max <- max(sum(Bak_A,Bari_A,Bay_D,SH_R_JH_D,H_WDP,A_D,na.rm=TRUE),Bay_D2)
section_add <- sum(S_DR, T_A, section_max, na.rm=TRUE)
PA[t] <- section_add
#Bay_Incidents
PI[t] <- 0
#Bay_Departures
PD[t] <- 0
}
section_add <- sum(S_RD, T_A, section_max, na.rm=TRUE)
for (t in start:end){
S_RD <- rivers.long[t,"Shabelle_River_discharge"]
#wma(Togdheer_Arrival, 8) +
T_A <- weighted.mean(arrs.long[ (t-8):t, "Togdheer_Arrival"])
#max(
#2.85396032063776*Bakool_Arrival +
Bak_A <- 2.81910559622002*arrs.long[t,"Bakool_Arrival"]
#2.00585641198899*Bari_Arrival +
Bari_A <- 2.48532945247097*arrs.long[t,"Bari_Arrival"]
#0.584222032988209*Bay_Departures +
Bay_D <- 0.595514845826536*deps.long[t,"Bay_Departures"]
#Shabeellaha_Dhexe_rain*sma(Jubbada_Hoose_Departures, 2) +
SH_R_JH_D <- -1*rain.long[t,"Shabeellaha_Dhexe_rain"]*mean(deps.long[(t-2):t,"Jubbada_Hoose_Departures"])
#-0.0794226038273046*Hiiraan_WaterDrumPrice
H_WDP <- -0.0833170517942912*as.numeric(water.long[t, "Hiiraan_WaterDrumPrice"])
#-6.45129861220252*Awdal_Departures,
A_D <- -5.84944477753492*deps.long[t,"Awdal_Departures"]
#0.2731815154054876*Bay_Departures)
Bay_D2 <- 0.312135550188447*deps.long[t,"Bay_Departures"]
#Bay_Arrival = Shabeellaha_Dhexe_rain + delay(Woqooyi_Galbeed_Arrival, 1) + wma(Togdheer_Arrival, 6)
#+ max(2.84291053988138*Bakool_Arrival + 1.90605269499887*Bari_Arrival + 0.582938861571093*Bay_Departures
#+ delay(Woqooyi_Galbeed_Arrival, 1) - (Shabeellaha_Dhexe_rain*sma(Jubbada_Hoose_Departures, 2) )
#- 0.0801078676959042*Hiiraan_WaterDrumPrice - 6.62472178142272*Awdal_Departures, 0.263886473589876*Bay_Departures)
#breaking the function to section max
PA[t] <- 0
section_max <- max(sum(Bak_A,Bari_A,Bay_D,SH_R_JH_D,H_WDP,A_D,na.rm=TRUE),Bay_D2)
section_add <- sum(S_RD, T_A, section_max, na.rm=TRUE)
PA[t] <- section_add
#Bay_Incidents
PI[t] <- 0
#Bay_Departures
PD[t] <- 0
}
PA
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
for(t in start:end){
B <- arrs.long[t,"Sool_Arrival"]
D <- arrs.long[t,"Gedo_Arrival"]
E <- 4.69615656952437*arrs.long[t,"Bakool_Arrival"]
F <- 2.32455930952855*mean(arrs.long[(t-15):t,"Hiiraan_Arrival"])
G <- -1*water.long[t,"Hiiraan_WaterDrumPrice"]
H <- -1*mean(deps.long[(t-2):t,"Gedo_Departures"])
I <- -7.50004997165576*deps.long[t,"Nugaal_Departures"]
J <- sum(D, E, F, G, H, I, na.rm=TRUE)
C <- arrs.long[(t-15),"Bari_Arrival"]
A <- max(mean(deps.long[(t-9):t,"Bay_Departures"]), 1.13795004879906*max(B, max(J,C)))
Z <- sum(A,-646.71173531923,na.rm=TRUE)
Bay_A <- max(	rivers.long[(t-4),"Juba_River_discharge"], max(deps.long[(t-2),"Bari_Departures"],Z ))
PA[t] <- Bay_A
#Bay_Incidents
PI[t] <- 0
#Bay_Departures
PD[t] <- 0
}
start = 92
end=92
len=92
PI <- PA <- PD <- rep(NA, len)
t=92
B <- arrs.long[t,"Sool_Arrival"]
B
B <- arrs.long[t,"Sool_Arrival"]
D <- arrs.long[t,"Gedo_Arrival"]
E <- 4.69615656952437*arrs.long[t,"Bakool_Arrival"]
F <- 2.32455930952855*mean(arrs.long[(t-15):t,"Hiiraan_Arrival"])
G <- -1*water.long[t,"Hiiraan_WaterDrumPrice"]
Fa <- 2.32455930952855*mean(arrs.long[(t-15):t,"Hiiraan_Arrival"])
G <- -1*water.long[t,"Hiiraan_WaterDrumPrice"]
H <- -1*mean(deps.long[(t-2):t,"Gedo_Departures"])
I <- -7.50004997165576*deps.long[t,"Nugaal_Departures"]
J <- sum(D, E, Fa, G, H, I, na.rm=TRUE)
C <- arrs.long[(t-15),"Bari_Arrival"]
A <- max(mean(deps.long[(t-9):t,"Bay_Departures"]), 1.13795004879906*max(B, max(J,C)))
Z <- sum(A,-646.71173531923,na.rm=TRUE)
Bay_A <- max(	rivers.long[(t-4),"Juba_River_discharge"], max(deps.long[(t-2),"Bari_Departures"],Z ))
PA[t] <- Bay_A
PI[t] <- 0
PA
Bay_A <- max(	rivers.long[(t-4),"Juba_River_discharge"], max(deps.long[(t-2),"Bari_Departures"],Z ))
Bay_A
B <- arrs.long[t,"Sool_Arrival"]
D <- arrs.long[t,"Gedo_Arrival"]
E <- 4.69615656952437*arrs.long[t,"Bakool_Arrival"]
Fa <- 2.32455930952855*mean(arrs.long[(t-15):t,"Hiiraan_Arrival"])
G <- -1*water.long[t,"Hiiraan_WaterDrumPrice"]
G <- -1*water.long[t,"Hiiraan_WaterDrumPrice"]
H <- -1*mean(deps.long[(t-2):t,"Gedo_Departures"])
I <- -7.50004997165576*deps.long[t,"Nugaal_Departures"]
J <- sum(D, E, Fa, G, H, I, na.rm=TRUE)
C <- arrs.long[(t-15),"Bari_Arrival"]
A <- max(mean(deps.long[(t-9):t,"Bay_Departures"]), 1.13795004879906*max(B, max(J,C)))
Z <- sum(A,-646.71173531923,na.rm=TRUE)
Bay_A <- max(	rivers.long[(t-4),"Juba_River_discharge"], max(deps.long[(t-2),"Bari_Departures"],Z ))
Bay_A <- max(	rivers.long[(t-4),"Juba_River_discharge"], max(deps.long[(t-2),"Bari_Departures"],Z ),na.rm = TRUE)
PA[t] <- Bay_A
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
start = 92
end=92
len=92
PI <- PA <- PD <- rep(NA, len)
t=29
A<- arrs.long[t,"Sool_Arrival"]
B <- median(deps.long[(t-9):t,"Bay_Departures"])
C <- 5.12362836857411*arrs.long[t,"Bakool_Arrival"]
D <- 2.36682580358288*mean(arrs.long[(t-15):t,"Hiiraan_Arrival"])
D <- 2.36682580358288*mean(arrs.long[(t-15):t,"Hiiraan_Arrival"])
E <- arrs.long[t,"Gedo_Arrival"]
Fa <- -1*water.long[t,"Hiiraan_WaterDrumPrice"]
G <- -8.93031647771045*deps.long[t,"Nugaal_Departures"]
deps <-gsheet2text(jetson, sheetid = 677621454)
deps.long <-read.csv(text=deps)
Dates <- sapply(conflicts.long[,1],as.character.Date)
conflicts.long$Date <- as.Date(conflicts.long$Date, format="%m/%d/%Y")
arrs.long$Date <- as.Date(arrs.long$Date, format="%m/%d/%Y")
deps.long$Date <- as.Date(deps.long$Date, format="%m/%d/%Y")
rain.long$Date <-as.Date(rain.long$Date, format="%m/%d/%Y")
water.long$Date <-as.Date(water.long$Date, format="%m/%d/%Y")
rivers.long$Date <-as.Date(rivers.long$Date, format="%m/%d/%Y")
goats.long$Date <-as.Date(goats.long$Date, format="%m/%d/%Y")
fatalities.long$Date <-as.Date(fatalities.long$Date, format="%m/%d/%Y")
conflicts.long[,2:ncol(conflicts.long)] <- sapply(conflicts.long[,2:ncol(conflicts.long)], as.numeric)
arrs.long[,2:ncol(arrs.long)] <- sapply(arrs.long[,2:ncol(arrs.long)], as.numeric)
deps.long[,2:ncol(deps.long)] <- sapply(deps.long[,2:ncol(deps.long)], as.numeric)
rain.long[,2:ncol(rain.long)] <- sapply(rain.long[,2:ncol(rain.long)], as.numeric)
water.long[,2:ncol(water.long)] <- sapply(water.long[,2:ncol(water.long)], as.numeric,na.rm=TRUE)
rivers.long[,2:ncol(rivers.long)] <- sapply(rivers.long[,2:ncol(rivers.long)], as.numeric)
goats.long[,2:ncol(goats.long)] <- sapply(goats.long[,2:ncol(goats.long)], as.numeric)
fatalities.long[,2:ncol(fatalities.long)] <- sapply(fatalities.long[,2:ncol(fatalities.long)], as.numeric)
Fa <- -1*water.long[t,"Hiiraan_WaterDrumPrice"]
G <- -8.93031647771045*deps.long[t,"Nugaal_Departures"]
deps.long[90,"Nugaal_Departures"]
deps.long[91,"Nugaal_Departures"]
deps.long[92,"Nugaal_Departures"]
t=92
A<- arrs.long[t,"Sool_Arrival"]
B <- median(deps.long[(t-9):t,"Bay_Departures"])
C <- 5.12362836857411*arrs.long[t,"Bakool_Arrival"]
D <- 2.36682580358288*mean(arrs.long[(t-15):t,"Hiiraan_Arrival"])
E <- arrs.long[t,"Gedo_Arrival"]
Fa <- -1*water.long[t,"Hiiraan_WaterDrumPrice"]
A<- arrs.long[t,"Sool_Arrival"]
B <- median(deps.long[(t-9):t,"Bay_Departures"])
C <- 5.12362836857411*arrs.long[t,"Bakool_Arrival"]
D <- 2.36682580358288*mean(arrs.long[(t-15):t,"Hiiraan_Arrival"])
E <- arrs.long[t,"Gedo_Arrival"]
Fa <- -1*water.long[t,"Hiiraan_WaterDrumPrice"]
G <- -8.93031647771045*deps.long[t,"Nugaal_Departures"]
H <- sum(C,D,E,Fa,G,na.rm=TRUE)
B_R <- max(A, max(B, H,na.rm=TRUE),na.rm =TRUE)
A<- arrs.long[t,"Sool_Arrival"]
B <- median(deps.long[(t-9):t,"Bay_Departures"])
C <- 5.12362836857411*arrs.long[t,"Bakool_Arrival"]
D <- 2.36682580358288*mean(arrs.long[(t-15):t,"Hiiraan_Arrival"])
E <- arrs.long[t,"Gedo_Arrival"]
Fa <- -1*water.long[t,"Hiiraan_WaterDrumPrice"]
G <- -8.93031647771045*deps.long[t,"Nugaal_Departures"]
A<- arrs.long[t,"Sool_Arrival"]
B <- median(deps.long[(t-9):t,"Bay_Departures"])
A<- arrs.long[t,"Sool_Arrival"]
B <- median(deps.long[(t-9):t,"Bay_Departures"])
C <- 5.12362836857411*arrs.long[t,"Bakool_Arrival"]
C <- 5.12362836857411*arrs.long[t,"Bakool_Arrival"]
D <- 2.36682580358288*mean(arrs.long[(t-15):t,"Hiiraan_Arrival"])
E <- arrs.long[t,"Gedo_Arrival"]
D <- 2.36682580358288*mean(arrs.long[(t-15):t,"Hiiraan_Arrival"])
E <- arrs.long[t,"Gedo_Arrival"]
D <- 2.36682580358288*mean(arrs.long[(t-15):t,"Hiiraan_Arrival"])
A<- arrs.long[t,"Sool_Arrival"]
B <- median(deps.long[(t-9):t,"Bay_Departures"])
C <- 5.12362836857411*arrs.long[t,"Bakool_Arrival"]
D <- 2.36682580358288*mean(arrs.long[(t-15):t,"Hiiraan_Arrival"])
E <- arrs.long[t,"Gedo_Arrival"]
Fa <- -1*water.long[t,"Hiiraan_WaterDrumPrice"]
G <- -8.93031647771045*deps.long[t,"Nugaal_Departures"]
H <- sum(C,D,E,Fa,G,na.rm=TRUE)
B_R <- max(A, max(B, H,na.rm=TRUE),na.rm =TRUE)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
A <- [1,2,3]
A <- cbind(1,2,3)
A
mean(A)
rollmean(A)
rollmean(A,3)
runApp()
runApp()
wma
wma
install.packages("ttr")
install.packages("TTR")
wma
WMA
WMA(a)
TTR::WMA()
library(TTR)
wma
TTR::WMA()
runApp()
runApp()
runApp()
runApp()
